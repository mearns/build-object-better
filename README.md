# build-object-better

A javascript package for building objects from their properties. Meant to be a replacement for all of your:

```javascript
const object = keys.reduce((o, k) => {
  o[k] = figureOutValue(k)
  return o
}, {})
```

Instead:

```javascript
const object = bob(keys, figureOutValue)
```

## Overview

The general form of the call is `bob(iterable, [[keySupplier], valueSupplier])`; in order to generate
the keys and values of the generated object, the iterable is iterated over and for each element, the `keySupplier`
and `valueSupplier` are invoked to generate the respective components of one key/value pair which will be
added as a property on the generated object.

The `keySupplier` is invoked as `keySupplier(element, index, iterable)`, where `element` is an element
from the `iterable`, and `index` is the 0-based numeric index of that element in `iterable`. Whatever
value it returns will be used as the name of a property on the generated object.

Similarly, `valueSupplier` is invoked as `valueSupplier(key, index, keys, element, iterable)`, where
`key` is the corresponding key generated by the `keySupplier`, and `keys` is the complete collection of
all generated keys, in corresponding order.

Invoked with two arguments, a default `keySupplier` is used, which simply uses the element from the `iterable`
as a key. In other words, the `iterable` is treated as the complete list of keys.

In addition to using functions for the suppliers, you can use objects or arrays as well. When an object is used
for a supplier, the first argument that would have been passed to the supplier function (the iterable element, or
the key) is used as the name of a property to pull a value out of the supplier object.

If an array is given as a supplier, then the _index_ that would have been passed as the second argument to
the is used to pull a value of of the supplier array.

For the `valueSupplier` only, an additional option is to pass in a primitive value, which will be used as
a constant value for all supplier requests. This is not available as the `keySupplier` because there's no
apparent need to go through such lengths to build an object with a single property.

Alternatively, the function can be invoked with a single argument. If this argument is an iterable object,
then the elements of the iterable define the properties of the build object, either as an array of two
elements (`[key, value]`), or as an object with a `key` and `value` property.

If the single argument is a non-iterable object, then it is shallow copied.

## API

<a name="module_build-object-better"></a>

### `bob(...args)`
The module exports a single function (referred to here as `bob`) that is used for building an object in various ways. Different signatures are available as described below.

In general, there are two ways to use the function: with one argument, or with two. With one argument, that argument fully specifies the properties
to create in the object, either as a sequence of key/value pairs, or else as a source object which is cloned.

With two arguments, the first argument is an iterable of property names ("keys"), and the second argument describes how to determine the
value for each property.

**Kind**: Exported function

| Param | Type | Description |
| --- | --- | --- |
| ...args | <code>\*</code> | See descriptions of different options below. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(iterable, keyCalculator, valueCalculator)`
Build an object from an iterable, with functions to generate the keys and values of the object's properties.

Other options for the `valueCalculator` as described in the subsequent signatures are also allowed here.

| Param | Type | Description |
| --- | --- | --- |
| iterable | <code>Iterable.&lt;\*&gt;</code> | An iterable (e.g., an Array) that will be iterated over to generate the property names (keys) and values of the built object.
| keyCalculator | <code>function(elem:\*, idx:number, iterable:Iterable):string</code> | A function that is used to generate the keys (i.e. property names) that your object will be given, based on the elements of `iterable`. |
| valueCalculator | <code>function(key:string, idx:number, keys:Iterable.&lt;string&gt;, elem:\*, iterable:Iterable.&lt;\*&gt;):\*</code> | A function that is used to generate the values of your object's properties. It is invoked once for each of the generated keys, with the key itself, the index of the key in `keys`, and the complete `keys` iterable as arguments. Two additional arguments are the corresponding element from the given `iterable`, and the `iterable` itself. |

#### `bob(iterable, keys, valueCalculator)`
Build an object from an iterable, an array of corresponding keys (property names), and a function to generate the values of the object's properties.

Other options for the `valueCalculator` as described in the subsequent signatures are also allowed here.

| Param | Type | Description |
| --- | --- | --- |
| iterable | <code>Iterable.&lt;\*&gt;</code> | An iterable (e.g., an Array) that will be iterated over to generate the property names (keys) and values of the built object.
| keys | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) describing the keys (i.e. property names) that your object will be given.|
| valueCalculator | <code>function(key:string, idx:number, keys:Iterable.&lt;string&gt;, elem:\*, iterable:Iterable.&lt;\*&gt;):\*</code> | A function that is used to generate the values of your object's properties. It is invoked once for each of the generated keys, with the key itself, the index of the key in `keys`, and the complete `keys` iterable as arguments. Two additional arguments are the corresponding element from the given `iterable`, and the `iterable` itself. |

#### `bob(iterable, keyMap, valueCalculator)`
Build an object from an iterable, a map of elements to keys (property names), and a function to generate the values of the object's properties.

Other options for the `valueCalculator` as described in the subsequent signatures are also allowed here.

| Param | Type | Description |
| --- | --- | --- |
| iterable | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) that will be iterated over to generate the property names (keys) and values of the built object.
| keyMap | <code>Object</code> | An object mapping elements of `iterable` to keys (i.e., property names for the built object).|
| valueCalculator | <code>function(key:string, idx:number, keys:Iterable.&lt;string&gt;, elem:string, iterable:Iterable.&lt;string&gt;):\*</code> | A function that is used to generate the values of your object's properties. It is invoked once for each of the generated keys, with the key itself, the index of the key in `keys`, and the complete `keys` iterable as arguments. Two additional arguments are the corresponding element from the given `iterable`, and the `iterable` itself. |

#### `bob(keys, valueCalculator)`
Build an object from an iterable of property names and a function to generate corresponding values for each one.

| Param | Type | Description |
| --- | --- | --- |
| keys | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) describing the keys (i.e. property names) that your object will be given. |
| valueCalculator | <code>function(key:\*, idx:number, keys:Iterable):\*</code> | A function that is used to generate the values of your object's properties. It is invoked once for each of the provided keys, with the key itself, the index of the key in `keys`, and the complete `keys` iterable as arguments. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(keys, values)`
Build an object from a sequence of property names and corresponding property values.

**Kind**: static method of [<code>module.exports</code>](#exp_module_build-object-better--module.exports)

| Param | Type | Description |
| --- | --- | --- |
| keys | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) describing the keys (i.e. property names) that your object will be given. |
| values | <code>Array.&lt;\*&gt;</code> | An array of property values for your object. These will be "zipped" with the provided keys, so the 3rd key in `keys` will be assigned the third element (index `2`) in `values`. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(keys, source)`
Build an object by copying a specified set of properties from another object.

| Param | Type | Description |
| --- | --- | --- |
| keys | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) describing the keys (i.e. property names) that your object will be given. |
| source | <code>Object</code> | An object from which property values will be copied. For each key in `keys`, the value for that property will be taken as the value of the property with the same name from this object. Note that this will walk the entire prototype chain as needed to find the property, and produce an `undefined` value for any missing properties. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(keys, value)`
Build an object with specified properties, all of which have the same value.

| Param | Type | Description |
| --- | --- | --- |
| keys | <code>Iterable.&lt;string&gt;</code> | An iterable (e.g., an Array) describing the keys (i.e. property names) that your object will be given. |
| value | <code><em>primitive</em></code> | A constant value that will be used as the value for all properties of your object. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(entries)`
Build an object from an iterable of entries, each giving the name and value of one property in the object (e.g., as returned by
`Object.entries`).

| Param | Type | Description |
| --- | --- | --- |
| entries | <code>Iterable&lt;(Array\|{key, value})&gt;</code> | An iterable of entries, each entry specifying both the name and value of a property for your object. Each entry can be an Array, or an object.<br />If an Array, then the first item (index 0) in the Array is the name of the property (the "key"), and the second item (index 1) is the property value.<br />If the entry is not an array, then it is assumed to be an Object with a "key" property specifying the property name, and a "value" property specifying its value. |

<a name="module_build-object-better--module.exports.bob"></a>

#### `bob(source)`
Build an object as a shallow-clone of another object. The returned object will have all the same _own_ properties as the provided
source, with the same value. Values are not cloned, but copied directly, thus non-primitive objects (such as Arrays and Objects)
will actually be references to the same in-memory value.

| Param | Type | Description |
| --- | --- | --- |
| source | <code>Object</code> | The object to clone. |

